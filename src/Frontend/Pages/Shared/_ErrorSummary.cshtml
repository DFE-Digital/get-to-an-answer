@* C# Razor *@
@using Microsoft.AspNetCore.Mvc.ModelBinding
@inject Microsoft.AspNetCore.Mvc.Rendering.IHtmlHelper Html

@{
    var modelState = ViewData.ModelState;
    var errors = modelState?.Where(kv => kv.Value?.Errors.Count > 0).ToList() ?? [];
    var hasErrors = errors.Count > 0;
}

@if (hasErrors)
{
    <div class="govuk-error-summary" aria-labelledby="error-summary-title" role="alert" tabindex="-1" data-module="govuk-error-summary">
        <h2 class="govuk-error-summary__title" id="error-summary-title">There is a problem</h2>
        <div class="govuk-error-summary__body">
            <ul class="govuk-list govuk-error-summary__list">
                @foreach (var kvp in errors)
                {
                    var fieldName = kvp.Key;
                    var message = kvp.Value!.Errors[0].ErrorMessage;
                    <li><a class="govuk-link" href="#@fieldName">@message</a></li>
                }
            </ul>
        </div>
    </div>
}