@page "/admin/questionnaires/manage"
@model Admin.Pages.Questionnaire.ManageQuestionnaires

@{
  ViewData["Title"] = "Your questionnaires";
  var questionnaires = Model.ViewModel.Questionnaires;
}

@if (Model.ViewModel.QuestionnaireState is { JustDeleted: true })
{
  <div class="govuk-grid-row">
    <div class="govuk-grid-column-two-thirds">
      <div class="govuk-notification-banner govuk-notification-banner--success" role="alert"
           aria-labelledby="govuk-notification-banner-title" data-module="govuk-notification-banner">
        <div class="govuk-notification-banner__header">
          <h2 class="govuk-notification-banner__title" id="govuk-notification-banner-title">
            Success
          </h2>
        </div>
        <div class="govuk-notification-banner__content">
          <h3 id="just-deleted-questionnaire-banner-text" class="govuk-notification-banner__heading">
            Your questionnaire '@TempData.Peek("QuestionnaireTitle")' has been deleted.
          </h3>
        </div>
      </div>
    </div>
  </div>
}
else
{
  @await Html.PartialAsync("Shared/_Notifications", Model.ViewModel.QuestionnaireState)
}



<h1 class="govuk-heading-l">
  @ViewData["Title"]
</h1>

<a class="govuk-button govuk-button--start" data-module="govuk-button" draggable="false" role="button"
   href="/admin/questionnaires/create" data-govuk-button-init="">Create a questionnaire
  <svg class="govuk-button__start-icon" xmlns="http://www.w3.org/2000/svg" width="17.5" height="19"
       viewBox="0 0 33 40" focusable="false" aria-hidden="true">
    <path fill="currentColor" d="M0 0h13l20 20-20 20H0l20-20z"></path>
  </svg>
</a>

<div class="app-scrolling-wrapper" role="region" tabindex="0" aria-label="Questionnaires">

  <table class="govuk-table">
    <thead class="govuk-table__head">
    <tr class="govuk-table__row">
      <th class="govuk-table__header" scope="col">Name</th>
      <th class="govuk-table__header" scope="col">Created by</th>
      <th class="govuk-table__header" scope="col">Last updated</th>
      <th class="govuk-table__header govuk-table__header--numeric" scope="col">Status</th>
    </tr>
    </thead>
    <tbody class="govuk-table__body">

    @if (questionnaires != null)
    {
      @foreach (var questionnaire in questionnaires)
      {
        <tr class="govuk-table__row">
          <td class="govuk-table__cell">
            <a class="govuk-link" href="/admin/questionnaires/@questionnaire.Id/track">@questionnaire.Title</a>
          </td>
          <td class="govuk-table__cell">@questionnaire.CreatedBy</td>
          <td
            class="govuk-table__cell">@questionnaire.UpdatedAt.Date.ToString("d MMMM yyyy", System.Globalization.CultureInfo.GetCultureInfo("en-GB"))</td>

          <td class="govuk-table__cell govuk-table__cell--numeric">
            <div class="app-form-states">
              <strong class="govuk-tag" data-status="@questionnaire.Status">
                @questionnaire.Status
              </strong>
            </div>
          </td>
        </tr>
      }
    }
    </tbody>
  </table>

</div>