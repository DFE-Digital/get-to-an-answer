@using Common.Enum
@model QuestionnaireViewModel

@{
  ViewData["Title"] = "Home Page";
}

@section BeforeContent
{
  <a class="govuk-back-link govuk-!-display-none-print" href="/">Back to Care Leavers</a>
}

@if (Model.InviteAccepted)
{
  <div class="govuk-grid-row">
    <div class="govuk-grid-column-two-thirds">
      <div class="govuk-notification-banner govuk-notification-banner--success" role="alert" aria-labelledby="govuk-notification-banner-title" data-module="govuk-notification-banner">
        <div class="govuk-notification-banner__header">
          <h2 class="govuk-notification-banner__title" id="govuk-notification-banner-title">
            Success
          </h2>
        </div>
        <div class="govuk-notification-banner__content">
          <h3 class="govuk-notification-banner__heading">
            You've been added as a contributor.
          </h3>
          <p class="govuk-body">We are glad to have you on the team.</p>
        </div>
      </div>
    </div>
  </div>
}

<div class="govuk-grid-row">
  <div class="govuk-grid-column-two-thirds">
    <h1 class="govuk-heading-l govuk-!-margin-bottom-2">
      <span class="govuk-caption-l">@Model.Questionnaire?.Title</span><span class="govuk-visually-hidden"> - </span>
      Create a questionnaire
    </h1>
    <dl class="govuk-!-margin-bottom-7">
      <dt class="govuk-visually-hidden">Status</dt>
      <dd class="govuk-!-margin-0"><strong class="govuk-tag" data-status="@Model.Questionnaire?.Status">@Model.Questionnaire?.Status</strong>
      </dd>
    </dl>
    <p class="govuk-!-margin-bottom-9">
      <a class="govuk-link" href="/admin/questionnaires/@Model.Questionnaire?.Id/Start/Preview" target="_blank">Preview this questionnaire</a>
    </p>
    <p class="app-task-list__summary">
      You’ve completed 1 of 8 tasks.
    </p>
    <div class="app-task-list">
      <h2 class="govuk-heading-m">
        1. Create your questionnaire
      </h2>
      <ul class="govuk-task-list">
        <li class="govuk-task-list__item govuk-task-list__item--with-link">
          <div class="govuk-task-list__name-and-hint"><a class="govuk-link govuk-task-list__link" aria-describedby="create-your-questionnaire-1-status" href="/admin/questionnaires/@Model.Questionnaire?.Id/edit">Edit the name of your questionnaire</a></div>
          <div class="govuk-task-list__status" id="create-your-questionnaire-1-status">Completed</div>
        </li>
        <li class="govuk-task-list__item govuk-task-list__item--with-link">
          <div class="govuk-task-list__name-and-hint"><a class="govuk-link govuk-task-list__link" aria-describedby="create-your-questionnaire-2-status" href="/admin/questionnaires/@Model.Questionnaire?.Id/questions">Add and edit your questions</a></div>
          <div class="govuk-task-list__status" id="create-your-questionnaire-2-status"><strong class="govuk-tag govuk-tag--light-blue">In progress</strong></div>
        </li>
      </ul>
      <h2 class="govuk-heading-m">
        2. Provide privacy and contact details
      </h2>
      <ul class="govuk-task-list">
        <li class="govuk-task-list__item govuk-task-list__item--with-link">
          <div class="govuk-task-list__name-and-hint">
            <a class="govuk-link govuk-task-list__link" aria-describedby="provide-privacy-and-contact-details-1-status" href="/forms/262709/privacy-policy">Provide a link to privacy information for this questionnaire</a>
          </div>
          <div class="govuk-task-list__status" id="provide-privacy-and-contact-details-1-status">
            <strong class="govuk-tag govuk-tag--blue">Not started</strong>
          </div>
        </li>
        <li class="govuk-task-list__item govuk-task-list__item--with-link">
          <div class="govuk-task-list__name-and-hint">
            <a class="govuk-link govuk-task-list__link" aria-describedby="provide-privacy-and-contact-details-2-status" href="/forms/262709/contact-details">Provide contact details for support</a>
          </div>
          <div class="govuk-task-list__status" id="provide-privacy-and-contact-details-2-status">
            <strong class="govuk-tag govuk-tag--blue">Not started</strong>
          </div>
        </li>
      </ul>
    </div>
    <div class="govuk-button-group">
      @if (Model.Questionnaire?.Status == EntityStatus.Draft)
      {
        <a class="govuk-button govuk-button--primary" data-module="govuk-button" href="/admin/questionnaires/@Model.Questionnaire.Id/Publish/Confirm" data-govuk-button-init="">Publish questionnaire</a>
      } 
      else if (Model.Questionnaire?.Status == EntityStatus.Published)
      {
        <a class="govuk-button govuk-button--secondary" data-module="govuk-button" href="/admin/questionnaires/@Model.Questionnaire.Id/Unpublish/Confirm" data-govuk-button-init="">Unpublish questionnaire</a>
      }
      <a class="govuk-button govuk-button--warning" data-module="govuk-button" href="/admin/questionnaires/@Model.Questionnaire?.Id/Delete/Confirm" data-govuk-button-init="">Delete questionnaire</a>
    </div>
    <p>
      <a class="govuk-link" href="/admin/questionnaires/@Model.Questionnaire?.Id/versions/@(Model.Questionnaire?.Version -1)/compare">View questionnaire versions</a>
    </p>
    <p>
      <a class="govuk-link" href="/admin/questionnaires/@Model.Questionnaire?.Id/clone">Clone this questionnaire</a>
    </p>
  </div>
</div>