@model QuestionnaireViewModel

@using Common.Extensions

@{
  ViewData["Title"] = "Branching map";
}

@section BeforeContent
{
  <a class="govuk-back-link govuk-!-display-none-print" href="/admin/questionnaires/@Model.BranchingMap.QuestionnaireId/track">Back to questionnaire '@Model.Questionnaire?.Title'</a>
}

<div class="govuk-grid-row">
  <div class="govuk-grid-column-full">
    <h1 class="govuk-heading-l">
      <span class="govuk-caption-l">@Model.BranchingMap.QuestionnaireTitle</span>
      Branching map
    </h1>

    <div class="govuk-hint">This visualises question-to-answer branching. Answers’ scores only indicate prioritisation and do not affect routing.</div>

    <div id="diagram-wrapper" class="govuk-!-margin-top-4">
      <div id="diagram" class="mermaid">
        @Model.BranchingMap.BranchingMap
      </div>
    </div>
  </div>
</div>

@section Scripts {
<script src="/js/mermaid.min.js"></script>
<script>
  window.mermaid.initialize({ 
    startOnLoad: true, 
    theme: 'redux', 
    securityLevel: 'loose'
  });
</script>
}