@model QuestionnaireViewModel

@using System.Security.Claims;

@{
  ViewData["Title"] = "Home Page";
}

@section BeforeContainer
{
  <section class="dfe-page-grey" id="main-content-header">
    <div class="govuk-width-container" id="main-header-container">
      <div class="govuk-grid-row">
        <div class="govuk-grid-column-full">
          <h1 class="govuk-heading-xl">Help users to get to an answer</h1>
          <p class="govuk-body">Create questionnaires to help users get to an answer.</p>
        </div>
      </div>
    </div>
  </section>
}

@if (Model.JustDeleted)
{
<div class="govuk-grid-row">
  <div class="govuk-grid-column-two-thirds">
    <div class="govuk-notification-banner govuk-notification-banner--success" role="alert" aria-labelledby="govuk-notification-banner-title" data-module="govuk-notification-banner">
      <div class="govuk-notification-banner__header">
        <h2 class="govuk-notification-banner__title" id="govuk-notification-banner-title">
          Success
        </h2>
      </div>
      <div class="govuk-notification-banner__content">
        <h3 class="govuk-notification-banner__heading">
          Your questionnaire has been deleted.
        </h3>
        <p class="govuk-body">Add a new questionnaire.</p>
      </div>
    </div>
  </div>
</div>
}

<h1 class="govuk-heading-l">
  Your questionnaires
</h1>

<a class="govuk-button govuk-button--start" data-module="govuk-button" draggable="false" role="button"
   href="/admin/questionnaires/create" data-govuk-button-init="">Create a questionnaire
  <svg class="govuk-button__start-icon" xmlns="http://www.w3.org/2000/svg" width="17.5" height="19"
       viewBox="0 0 33 40" focusable="false" aria-hidden="true">
    <path fill="currentColor" d="M0 0h13l20 20-20 20H0l20-20z"></path>
  </svg>
</a>

<div class="app-scrolling-wrapper" role="region" tabindex="0" aria-label="Questionnaires in ‘Care Leavers’">

  <table class="govuk-table">
    <caption class="govuk-table__caption govuk-table__caption--m">Questionnaires</caption>
    <thead class="govuk-table__head">
    <tr class="govuk-table__row">
      <th class="govuk-table__header" scope="col">Questionnaire name</th>
      <th class="govuk-table__header" scope="col">Created by</th>
      <th class="govuk-table__header govuk-table__header--numeric" scope="col">Status</th>
    </tr>
    </thead>
    <tbody class="govuk-table__body">
    @if (Model.Questionnaires is {} questionnaires)
    {
      @foreach (var questionnaire in questionnaires)
      {
        <tr class="govuk-table__row">
          <td class="govuk-table__cell"><a class="govuk-link" href="/admin/questionnaires/@questionnaire.Id/track">@questionnaire.Title</a></td>
          <td class="govuk-table__cell">@ViewBag.FullName</td>
          <td class="govuk-table__cell govuk-table__cell--numeric">
            <div class="app-form-states"><strong class="govuk-tag" data-status="@questionnaire.Status">@questionnaire.Status</strong>
            </div>
          </td>
        </tr>
      }
    }
    </tbody>
  </table>

</div>